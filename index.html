<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>UNI LIFE 2025 - AR Experience</title>
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, user-scalable=no"
    />

    <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js/aframe/build/aframe-ar-nft.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@300;500;700&display=swap"
      rel="stylesheet"
    />

    <!-- Modular CSS Stylesheets -->
    <link rel="stylesheet" href="./css/variables.css" />
    <link rel="stylesheet" href="./css/base.css" />
    <link rel="stylesheet" href="./css/loader.css" />
    <link rel="stylesheet" href="./css/layout.css" />
    <link rel="stylesheet" href="./css/components.css" />
    <link rel="stylesheet" href="./css/victory.css" />
    <link rel="stylesheet" href="./css/animations.css" />

    <script>
      AFRAME.registerComponent("super-smooth", {
        schema: {
          position: { type: "vec3" },
          rotation: { type: "vec3" },
        },
        init: function () {
          this.smoothPos = new THREE.Vector3();
          this.smoothRot = new THREE.Euler();
          this.initialized = false;
        },
        tick: function () {
          const obj = this.el.object3D;
          if (!this.initialized) {
            this.smoothPos.copy(obj.position);
            this.smoothRot.copy(obj.rotation);
            this.initialized = true;
            return;
          }
          const factor = 0.1;
          this.smoothPos.lerp(obj.position, factor);
          this.smoothRot.x += (obj.rotation.x - this.smoothRot.x) * factor;
          this.smoothRot.y += (obj.rotation.y - this.smoothRot.y) * factor;
          this.smoothRot.z += (obj.rotation.z - this.smoothRot.z) * factor;
          obj.position.copy(this.smoothPos);
          obj.rotation.copy(this.smoothRot);
        },
      });
    </script>
  </head>
  <body>
    <div class="corner corner-tl"></div>
    <div class="corner corner-tr"></div>
    <div class="corner corner-bl"></div>
    <div class="corner corner-br"></div>

    <div class="loader" id="loader">
      <div class="loader-title">UNI LIFE 2025</div>
      <div class="loader-bar"></div>
    </div>

    <div class="top-bar">
      <div class="top-row">
        <div class="logo">UNI<span>LIFE</span></div>
        <div class="status">
          SYSTEM <span class="online">ONLINE</span><br />AR TRACKING
        </div>
      </div>
      <div class="progress-row">
        <div class="chapter-dot current" id="dot1">
          <span class="dot-icon">üéì</span>
          <span class="dot-text">Campus</span>
        </div>
        <div class="chapter-dot" id="dot2">
          <span class="dot-icon">üíª</span>
          <span class="dot-text">Work</span>
        </div>
        <div class="chapter-dot" id="dot3">
          <span class="dot-icon">üìö</span>
          <span class="dot-text">Study</span>
        </div>
        <div class="chapter-dot" id="dot4">
          <span class="dot-icon">üç∫</span>
          <span class="dot-text">Party</span>
        </div>
      </div>
    </div>

    <div class="bottom-bar">
      <div class="scan-hint">
        SCAN <span class="target" id="scan-target">UNIVERSITY</span>
      </div>
    </div>

    <div class="chapter-panel" id="chapter-panel">
      <div class="chapter-panel-header">
        <div class="chapter-panel-title" id="panel-title">
          CHAPTER I: THE SEMESTER
        </div>
        <div class="chapter-panel-status">SCANNING</div>
      </div>
      <div class="chapter-panel-story" id="panel-story">Story content...</div>
    </div>

    <div class="victory success" id="victory-success">
      <div class="victory-badge">üéâ</div>
      <div class="victory-title">BALANCED!</div>
      <div class="victory-subtitle">SUCCESS ACHIEVED</div>
      <div class="victory-story">
        <p>Assignments submitted. <span class="em">Grades: 85%</span>.</p>
        <p>
          You arrive at the party, exhausted but accomplished. Your
          <span class="em">friends cheer</span> - they knew you'd make it.
        </p>
        <p>
          Tonight, you celebrate <span class="em">together</span>. Balance
          achieved. üéì‚ú®
        </p>
      </div>
      <button class="victory-btn" onclick="resetStory()">RESTART</button>
    </div>

    <div class="victory failure" id="victory-failure">
      <div class="victory-badge">üòû</div>
      <div class="victory-title">BURNED OUT</div>
      <div class="victory-subtitle">PRIORITIES MATTER</div>
      <div class="victory-story">
        <p>
          The party was fun. The semester? <span class="em">Not so much</span>.
        </p>
        <p>
          <span class="em">Three failed courses</span>. Academic probation. Your
          friends? They graduated.
        </p>
        <p>
          You didn't. Now you're figuring out life the
          <span class="em">hard way</span>. üíî
        </p>
      </div>
      <button class="victory-btn" onclick="resetStory()">RESTART</button>
    </div>

    <a-scene
      embedded
      renderer="colorManagement: true; physicallyCorrectLights: true; logarithmicDepthBuffer: true"
      vr-mode-ui="enabled: false"
      arjs="sourceType: webcam; trackingMethod: best; debugUIEnabled: false;"
      id="scene"
    >
      <a-entity light="type: ambient; intensity: 0.7"></a-entity>
      <a-entity
        light="type: directional; intensity: 0.9; castShadow: true"
        position="2 4 2"
      ></a-entity>

      <!-- University Marker (UTM) -->
      <a-nft
        type="nft"
        url="./utm"
        smooth="true"
        smoothCount="50"
        smoothTolerance="0.08"
        smoothThreshold="15"
        id="marker-university"
      >
        <a-entity position="0 0 0" super-smooth>
          <a-text
            value="WELCOME TO\nUTM"
            align="center"
            position="0 0 10"
            rotation="-90 0 0"
            scale="80 80 80"
            color="#4a90e2"
          ></a-text>
        </a-entity>
      </a-nft>

      <!-- Laptop Marker -->
      <a-nft
        type="nft"
        url="./laptop"
        smooth="true"
        smoothCount="50"
        smoothTolerance="0.08"
        smoothThreshold="15"
        id="marker-laptop"
      >
        <a-entity position="0 0 0" super-smooth>
          <!-- Note: rocket.glb model is missing from the project -->
          <a-text
            value="TIME TO WORK\nüíª"
            align="center"
            position="0 0 10"
            rotation="-90 0 0"
            scale="60 60 60"
            color="#f39c12"
          ></a-text>
        </a-entity>
      </a-nft>

      <!-- Books Marker (DDIA Book) -->
      <a-nft
        type="nft"
        url="./ddia"
        smooth="true"
        smoothCount="50"
        smoothTolerance="0.08"
        smoothThreshold="15"
        id="marker-books"
      >
        <a-entity position="0 0 0" super-smooth>
          <a-entity
            gltf-model="./books.glb"
            position="0 0 100"
            scale="200 200 200"
            rotation="-90 0 0"
          >
            <a-animation
              attribute="rotation"
              from="-90 0 0"
              to="-90 360 0"
              dur="20000"
              repeat="indefinite"
              easing="linear"
            ></a-animation>
          </a-entity>
          <a-text
            value="STUDYING HARD!\nDesigning Data-Intensive\nApplications üìö"
            align="center"
            position="0 0 250"
            rotation="-90 0 0"
            scale="60 60 60"
            color="#2ecc71"
          ></a-text>
        </a-entity>
      </a-nft>

      <!-- Beer Marker - Will show different content based on path -->
      <a-nft
        type="nft"
        url="./beer"
        smooth="true"
        smoothCount="50"
        smoothTolerance="0.08"
        smoothThreshold="15"
        id="marker-beer"
      >
        <a-entity position="0 0 0" super-smooth>
          <!-- Success path content -->
          <a-entity id="beer-success" visible="false">
            <a-entity
              gltf-model="./happy.glb"
              position="0 0 50"
              scale="200 200 200"
              rotation="-90 0 0"
            ></a-entity>
            <a-text
              value="PARTY TIME!\nYou earned it!\nüéâüéì‚ú®"
              align="center"
              position="0 0 220"
              rotation="-90 0 0"
              scale="70 70 70"
              color="#2ecc71"
            ></a-text>
          </a-entity>
          <!-- Failure path content -->
          <a-entity id="beer-failure" visible="false">
            <a-entity
              gltf-model="./homeless.glb"
              position="0 0 50"
              scale="200 200 200"
              rotation="-90 0 0"
            ></a-entity>
            <a-text
              value="CONSEQUENCES\nDropout\nüòûüíî"
              align="center"
              position="0 0 220"
              rotation="-90 0 0"
              scale="70 70 70"
              color="#e74c3c"
            ></a-text>
          </a-entity>
        </a-entity>
      </a-nft>

      <a-entity camera></a-entity>
    </a-scene>

    <!-- Modular JavaScript following SOLID & DRY principles -->
    <script type="module" src="./js/main.js"></script>
  </body>
</html>
