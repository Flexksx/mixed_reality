<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>UNI LIFE 2025 - AR Experience</title>
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, user-scalable=no"
    />

    <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js/aframe/build/aframe-ar-nft.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@300;500;700&display=swap"
      rel="stylesheet"
    />

    <style>
      :root {
        --uni-blue: #4a90e2;
        --uni-amber: #f39c12;
        --success-green: #2ecc71;
        --fail-red: #e74c3c;
        --fail-gray: #95a5a6;
        --dark-bg: #0a0a12;
      }

      * {
        box-sizing: border-box;
      }
      body {
        margin: 0;
        overflow: hidden;
        font-family: "Rajdhani", sans-serif;
        background: var(--dark-bg);
      }

      .loader {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: var(--dark-bg);
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        z-index: 9999;
        transition: opacity 0.5s, visibility 0.5s;
      }
      .loader.hidden {
        opacity: 0;
        visibility: hidden;
      }
      .loader-title {
        font-family: "Orbitron", sans-serif;
        font-size: 24px;
        font-weight: 900;
        color: var(--uni-blue);
        text-shadow: 0 0 20px var(--uni-blue);
        letter-spacing: 6px;
      }
      .loader-bar {
        width: 150px;
        height: 2px;
        background: #222;
        margin-top: 20px;
        position: relative;
        overflow: hidden;
      }
      .loader-bar::after {
        content: "";
        position: absolute;
        left: -50%;
        width: 50%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          var(--uni-blue),
          transparent
        );
        animation: loadingBar 1.5s infinite;
      }
      @keyframes loadingBar {
        0% {
          left: -50%;
        }
        100% {
          left: 100%;
        }
      }

      .top-bar {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        background: linear-gradient(
          180deg,
          rgba(0, 0, 0, 0.9) 0%,
          rgba(0, 0, 0, 0.7) 70%,
          transparent 100%
        );
        padding: 12px 15px 20px 15px;
        z-index: 100;
        pointer-events: none;
      }

      .top-row {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 10px;
      }

      .logo {
        font-family: "Orbitron", sans-serif;
        font-weight: 900;
        font-size: 16px;
        color: var(--uni-blue);
        text-shadow: 0 0 10px var(--uni-blue);
        letter-spacing: 3px;
      }
      .logo span {
        color: var(--uni-amber);
        text-shadow: 0 0 10px var(--uni-amber);
      }

      .status {
        font-size: 9px;
        color: #555;
        letter-spacing: 1px;
        text-align: right;
      }
      .status .online {
        color: var(--success-green);
      }

      .progress-row {
        display: flex;
        gap: 6px;
        align-items: center;
      }
      .chapter-dot {
        flex: 1;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 4px;
        padding: 8px 6px;
        background: rgba(0, 0, 0, 0.5);
        border: 1px solid #222;
        border-radius: 6px;
        transition: all 0.3s;
      }
      .chapter-dot.active {
        border-color: var(--uni-blue);
        box-shadow: 0 0 10px rgba(74, 144, 226, 0.3);
      }
      .chapter-dot.current {
        border-color: var(--uni-amber);
        animation: pulse 1.5s infinite;
      }
      @keyframes pulse {
        0%,
        100% {
          box-shadow: 0 0 5px var(--uni-amber);
        }
        50% {
          box-shadow: 0 0 12px var(--uni-amber);
        }
      }
      .dot-icon {
        font-size: 16px;
      }
      .dot-text {
        font-size: 8px;
        color: #555;
        letter-spacing: 1px;
        text-transform: uppercase;
      }
      .chapter-dot.active .dot-text,
      .chapter-dot.current .dot-text {
        color: #aaa;
      }

      .bottom-bar {
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        height: 35px;
        background: linear-gradient(
          0deg,
          rgba(0, 0, 0, 0.8) 0%,
          transparent 100%
        );
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 100;
        pointer-events: none;
      }
      .scan-hint {
        font-size: 10px;
        color: #666;
        letter-spacing: 2px;
      }
      .scan-hint .target {
        color: var(--uni-amber);
        font-weight: 700;
      }

      .corner {
        position: fixed;
        width: 20px;
        height: 20px;
        border: 1px solid rgba(74, 144, 226, 0.4);
        z-index: 50;
      }
      .corner-tl {
        top: 8px;
        left: 8px;
        border-right: none;
        border-bottom: none;
      }
      .corner-tr {
        top: 8px;
        right: 8px;
        border-left: none;
        border-bottom: none;
      }
      .corner-bl {
        bottom: 8px;
        left: 8px;
        border-right: none;
        border-top: none;
      }
      .corner-br {
        bottom: 8px;
        right: 8px;
        border-left: none;
        border-top: none;
      }

      .chapter-panel {
        position: fixed;
        bottom: 50px;
        left: 12px;
        right: 12px;
        background: linear-gradient(
          135deg,
          rgba(0, 0, 0, 0.92) 0%,
          rgba(10, 20, 40, 0.92) 100%
        );
        border: 1px solid var(--uni-blue);
        border-radius: 8px;
        padding: 14px 16px;
        z-index: 150;
        opacity: 0;
        transform: translateY(10px);
        transition: all 0.3s;
        pointer-events: none;
      }
      .chapter-panel.show {
        opacity: 1;
        transform: translateY(0);
      }
      .chapter-panel-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 8px;
      }
      .chapter-panel-title {
        font-family: "Orbitron", sans-serif;
        font-size: 12px;
        color: var(--uni-blue);
        text-shadow: 0 0 8px var(--uni-blue);
        letter-spacing: 2px;
      }
      .chapter-panel-status {
        font-size: 9px;
        color: var(--success-green);
        letter-spacing: 1px;
      }
      .chapter-panel-story {
        font-size: 13px;
        color: #bbb;
        line-height: 1.5;
      }
      .chapter-panel-story .neon {
        color: var(--uni-amber);
        font-weight: 600;
      }

      .victory {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        z-index: 300;
        opacity: 0;
        visibility: hidden;
        transition: all 0.5s;
      }
      .victory.show {
        opacity: 1;
        visibility: visible;
      }
      .victory.success {
        background: radial-gradient(
          ellipse at center,
          rgba(46, 204, 113, 0.15) 0%,
          rgba(0, 0, 0, 0.98) 100%
        );
      }
      .victory.failure {
        background: radial-gradient(
          ellipse at center,
          rgba(231, 76, 60, 0.15) 0%,
          rgba(0, 0, 0, 0.98) 100%
        );
      }
      .victory-badge {
        width: 70px;
        height: 70px;
        border: 2px solid var(--success-green);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 35px;
        margin-bottom: 15px;
        box-shadow: 0 0 25px var(--success-green);
      }
      .victory.failure .victory-badge {
        border-color: var(--fail-red);
        box-shadow: 0 0 25px var(--fail-red);
      }
      .victory-title {
        font-family: "Orbitron", sans-serif;
        font-size: 18px;
        font-weight: 900;
        color: var(--success-green);
        text-shadow: 0 0 15px var(--success-green);
        letter-spacing: 4px;
        margin-bottom: 8px;
      }
      .victory.failure .victory-title {
        color: var(--fail-red);
        text-shadow: 0 0 15px var(--fail-red);
      }
      .victory-subtitle {
        font-size: 11px;
        color: #666;
        letter-spacing: 2px;
        margin-bottom: 20px;
      }
      .victory-story {
        max-width: 280px;
        text-align: center;
        margin-bottom: 25px;
      }
      .victory-story p {
        font-size: 12px;
        color: #888;
        line-height: 1.5;
        margin: 8px 0;
      }
      .victory-story .em {
        color: var(--uni-amber);
        font-weight: 600;
      }
      .victory.failure .victory-story .em {
        color: var(--fail-gray);
      }
      .victory-btn {
        font-family: "Orbitron", sans-serif;
        padding: 12px 30px;
        font-size: 10px;
        letter-spacing: 2px;
        background: transparent;
        color: var(--uni-blue);
        border: 1px solid var(--uni-blue);
        cursor: pointer;
        transition: all 0.3s;
        pointer-events: auto;
      }
      .victory-btn:active {
        background: var(--uni-blue);
        color: #000;
      }
    </style>

    <script>
      AFRAME.registerComponent("super-smooth", {
        schema: {
          position: { type: "vec3" },
          rotation: { type: "vec3" },
        },
        init: function () {
          this.smoothPos = new THREE.Vector3();
          this.smoothRot = new THREE.Euler();
          this.initialized = false;
        },
        tick: function () {
          const obj = this.el.object3D;
          if (!this.initialized) {
            this.smoothPos.copy(obj.position);
            this.smoothRot.copy(obj.rotation);
            this.initialized = true;
            return;
          }
          const factor = 0.1;
          this.smoothPos.lerp(obj.position, factor);
          this.smoothRot.x += (obj.rotation.x - this.smoothRot.x) * factor;
          this.smoothRot.y += (obj.rotation.y - this.smoothRot.y) * factor;
          this.smoothRot.z += (obj.rotation.z - this.smoothRot.z) * factor;
          obj.position.copy(this.smoothPos);
          obj.rotation.copy(this.smoothRot);
        },
      });
    </script>
  </head>
  <body>
    <div class="corner corner-tl"></div>
    <div class="corner corner-tr"></div>
    <div class="corner corner-bl"></div>
    <div class="corner corner-br"></div>

    <div class="loader" id="loader">
      <div class="loader-title">UNI LIFE 2025</div>
      <div class="loader-bar"></div>
    </div>

    <div class="top-bar">
      <div class="top-row">
        <div class="logo">UNI<span>LIFE</span></div>
        <div class="status">
          SYSTEM <span class="online">ONLINE</span><br />AR TRACKING
        </div>
      </div>
      <div class="progress-row">
        <div class="chapter-dot current" id="dot1">
          <span class="dot-icon">üéì</span>
          <span class="dot-text">Campus</span>
        </div>
        <div class="chapter-dot" id="dot2">
          <span class="dot-icon">üíª</span>
          <span class="dot-text">Work</span>
        </div>
        <div class="chapter-dot" id="dot3">
          <span class="dot-icon">üìö</span>
          <span class="dot-text">Study</span>
        </div>
        <div class="chapter-dot" id="dot4">
          <span class="dot-icon">üç∫</span>
          <span class="dot-text">Party</span>
        </div>
      </div>
    </div>

    <div class="bottom-bar">
      <div class="scan-hint">
        SCAN <span class="target" id="scan-target">UNIVERSITY</span>
      </div>
    </div>

    <div class="chapter-panel" id="chapter-panel">
      <div class="chapter-panel-header">
        <div class="chapter-panel-title" id="panel-title">
          CHAPTER I: THE SEMESTER
        </div>
        <div class="chapter-panel-status">SCANNING</div>
      </div>
      <div class="chapter-panel-story" id="panel-story">Story content...</div>
    </div>

    <div class="victory success" id="victory-success">
      <div class="victory-badge">üéâ</div>
      <div class="victory-title">BALANCED!</div>
      <div class="victory-subtitle">SUCCESS ACHIEVED</div>
      <div class="victory-story">
        <p>Assignments submitted. <span class="em">Grades: 85%</span>.</p>
        <p>
          You arrive at the party, exhausted but accomplished. Your
          <span class="em">friends cheer</span> - they knew you'd make it.
        </p>
        <p>
          Tonight, you celebrate <span class="em">together</span>. Balance
          achieved. üéì‚ú®
        </p>
      </div>
      <button class="victory-btn" onclick="resetStory()">RESTART</button>
    </div>

    <div class="victory failure" id="victory-failure">
      <div class="victory-badge">üòû</div>
      <div class="victory-title">BURNED OUT</div>
      <div class="victory-subtitle">PRIORITIES MATTER</div>
      <div class="victory-story">
        <p>
          The party was fun. The semester? <span class="em">Not so much</span>.
        </p>
        <p>
          <span class="em">Three failed courses</span>. Academic probation. Your
          friends? They graduated.
        </p>
        <p>
          You didn't. Now you're figuring out life the
          <span class="em">hard way</span>. üíî
        </p>
      </div>
      <button class="victory-btn" onclick="resetStory()">RESTART</button>
    </div>

    <a-scene
      embedded
      renderer="colorManagement: true; physicallyCorrectLights: true; logarithmicDepthBuffer: true"
      vr-mode-ui="enabled: false"
      arjs="sourceType: webcam; trackingMethod: best; debugUIEnabled: false;"
      id="scene"
    >
      <a-entity light="type: ambient; intensity: 0.7"></a-entity>
      <a-entity
        light="type: directional; intensity: 0.9; castShadow: true"
        position="2 4 2"
      ></a-entity>

      <!-- University Marker (UTM) -->
      <a-nft
        type="nft"
        url="./utm"
        smooth="true"
        smoothCount="50"
        smoothTolerance="0.08"
        smoothThreshold="15"
        id="marker-university"
      >
        <a-entity position="0 0 0" super-smooth>
          <a-text
            value="WELCOME TO\nUTM"
            align="center"
            position="100 100 -300"
            scale="80 80 80"
            color="#4a90e2"
          ></a-text>
        </a-entity>
      </a-nft>

      <!-- Laptop Marker (TODO: Replace rocket with laptop marker when ready) -->
      <a-nft
        type="nft"
        url="./rocket"
        smooth="true"
        smoothCount="50"
        smoothTolerance="0.08"
        smoothThreshold="15"
        id="marker-laptop"
      >
        <a-entity position="0 0 0" super-smooth>
          <a-entity
            gltf-model="./rocket.glb"
            position="100 -240 130"
            scale="40 40 40"
            rotation="270 0 0"
          ></a-entity>
          <a-text
            value="TIME TO WORK"
            align="center"
            position="100 50 100"
            scale="50 50 50"
            color="#f39c12"
          ></a-text>
        </a-entity>
      </a-nft>

      <!-- Books Marker (DDIA Book) -->
      <a-nft
        type="nft"
        url="./ddia"
        smooth="true"
        smoothCount="50"
        smoothTolerance="0.08"
        smoothThreshold="15"
        id="marker-books"
      >
        <a-entity position="0 0 0" super-smooth>
          <a-entity
            gltf-model="./books.glb"
            position="0 -100 -200"
            scale="100 100 100"
            rotation="0 0 0"
          >
            <a-animation
              attribute="rotation"
              from="0 0 0"
              to="0 360 0"
              dur="20000"
              repeat="indefinite"
              easing="linear"
            ></a-animation>
          </a-entity>
          <a-text
            value="STUDYING HARD!\nDesigning Data-Intensive\nApplications üìö"
            align="center"
            position="0 200 -200"
            scale="60 60 60"
            color="#2ecc71"
          ></a-text>
        </a-entity>
      </a-nft>

      <!-- Beer Marker - Will show different content based on path -->
      <a-nft
        type="nft"
        url="./beer"
        smooth="true"
        smoothCount="50"
        smoothTolerance="0.08"
        smoothThreshold="15"
        id="marker-beer"
      >
        <a-entity position="0 0 0" super-smooth>
          <!-- Success path content -->
          <a-entity id="beer-success" visible="false">
            <a-entity
              gltf-model="./happy.glb"
              position="0 -50 -200"
              scale="100 100 100"
              rotation="0 0 0"
            ></a-entity>
            <a-text
              value="PARTY TIME!\nYou earned it!\nüéâüéì‚ú®"
              align="center"
              position="0 200 -200"
              scale="70 70 70"
              color="#2ecc71"
            ></a-text>
          </a-entity>
          <!-- Failure path content -->
          <a-entity id="beer-failure" visible="false">
            <a-entity
              gltf-model="./homeless.glb"
              position="0 -50 -200"
              scale="100 100 100"
              rotation="0 0 0"
            ></a-entity>
            <a-text
              value="CONSEQUENCES\nDropout\nüòûüíî"
              align="center"
              position="0 200 -200"
              scale="70 70 70"
              color="#e74c3c"
            ></a-text>
          </a-entity>
        </a-entity>
      </a-nft>

      <a-entity camera></a-entity>
    </a-scene>

    <!-- Modular JavaScript following SOLID & DRY principles -->
    <script type="module" src="./js/main.js"></script>
  </body>
</html>
